# [情報処理学会第 88 回全国大会](https://www.ipsj.or.jp/event/taikai/88/index.html)

- [講演募集要項](https://www.ipsj.or.jp/event/taikai/88/appli_paper.html)
  - 申込締切: 2025 年~~12 月 5 日（金）15：00~~ 12 月 8 日（月）15：00
  - 原稿投稿・差替え締切: 2026 年 1 月 9 日（金）15：00
- [分野](https://www.ipsj.or.jp/event/taikai/88/keyword.html)
  - 503.モバイルコンピューティングと新社会システム (MBL)

# フォトウォークにおけるフォトスポットと撮影者の同時クラスタリング / Simultaneous Clustering of Photo Spots and Photographers in Photowalks

本研究で扱うフォトウォークとは，散歩中に興味を引いたものを撮影する行為である．フォトウォーク体験の向上には，ユーザの嗜好に合った新しい視点の提供が重要となる．観光分野では，2 部グラフを用いた観光スポットと訪問者の同時クラスタリング手法が提案されており，類似した嗜好を持つ訪問者グループと関連する観光スポット群を同時に抽出できる．本研究では，この手法をフォトウォークに適用し，撮影画像の位置情報と被写体カテゴリを用いてフォトスポットと撮影者の同時クラスタリングを試みる．観光とは異なるフォトウォーク特有の課題を明らかにし，フォトスポット推薦手法を検討する際の基礎的知見を得ることを目的とする．

## 1. はじめに

近年，カメラを持ち，興味のあるものや自分の感性に触れたものを写真に収めながら街を歩く「フォトウォーク」が注目されている．フォトウォーク中の行動データは，新たな行き先の提案において重要な資源となり得る．

しかし，フォトウォーク中の行動データの収集はコストがかかる上に，プライバシーの観点から大規模な公開データセットが不足している．既存の SNS データ等はノイズが多く，撮影者の意図や連続的な移動経路を含んだデータが少ないという課題がある．

そこで本研究では，大規模言語モデル（LLM）の構造化出力機能を活用し，地理的整合性を持ったフォトウォークデータを人工的に生成する手法を提案する．将来的なフォトスポットと撮影者の同時クラスタリング等の分析に資する基盤として，函館市を対象とした地理的制約とフォトウォークの行動特性を反映したデータセットを構築し，その整合性を検証する．

## 2. 関連研究

近年，LLM の高度な推論能力や世界知識を活用し，人間の移動軌跡を生成する研究が注目されている．Li ら \cite{li2024} は，LLM の構造化出力を活用した空間データ生成フレームワークを提案しているが，これらは一般的な空間データ（GeoJSON 等）の生成や都市レベルでの移動統計の再現に焦点を当てており，フォトウォークのような特定のコンテキストや複雑な行動制約（周回性など）を伴うデータ生成への適用は未検証である．

本研究の独自性は，既存手法が主とする移動統計の再現とは異なり，「どのような画像を撮影するか」という意味的情報を含み，かつ「出発地と到着地が同一」というフォトウォーク特有の地理的・行動的制約を満たすデータを生成する点にある．

## 3. フォトウォークデータ生成

本研究では，Gemini API の構造化出力機能を活用し，フォトウォークの実践に伴う位置情報付き撮影ログ（フォトウォークデータ）を生成する．

### 3.1 データスキーマ定義

データ構造として，1 回のフォトウォークを表す Session（セッション ID，ユーザー ID，Record のリスト）と，各撮影地点を表す Record（レコード ID，撮影時刻，緯度・経度，被写体カテゴリ）からなる 2 つのデータモデルからなるスキーマを定義した．LLM への指示においては，各フィールドに詳細な説明を付与することで，文脈を理解した値の生成を実現している．

### 3.2 プロンプト設計

人間の意図的なフォトウォークとしての妥当性を担保するため，以下の点を考慮してプロンプトを設計した．

第一に地理的整合性の確保である．実在しない場所や侵入不可能な領域へのマッピングを防止するため，撮影場所が地図の道路上であることを条件とした．また，具体的な地名やエリアを指定し，特定エリア内での行動を生成させるように設計した．第二に行動の完結性とリアリティである．散策としての自然な振る舞いを再現するため，出発地点と到着地点が同一であることを求めた．さらに，移動と撮影のバランスが取れた行動を模倣するため，適切な移動時間と撮影枚数の目安を指示に含めた．第三にエージェントの役割定義である．「フォトウォークするエージェント」という役割を付与し，単なる移動ではなく撮影を目的とし，被写体カテゴリの多様性を確保させた．

### 3.3 モデル選定と実装

Python と Google GenAI SDK を使用して，データ生成プログラムを実装した．セッション単位で独立しているため，並列処理による高速な大規模データ生成が可能である．

モデル選定においては，Gemini 3 Flash Preview を採用した．Gemini 2.5 Flash では「エリア内」という地理的生合成を遵守できないケースが見られ，Gemini 2.5 Flash Lite では「出発地点と到着地点が同一」という行動の完結性という制約を遵守できないケースが見られたためである．

本実験では，対象エリアを北海道函館市の美原・神山・富岡町・中道エリアとした．また，フォトウォークの具体的な条件として，徒歩 30 分程度かつ 10〜30 枚程度の画像を撮影することを設定した．実際に使用したプロンプトを以下に示す．

```text
あなたは北海道函館市の美原・神山・富岡町・中道エリアをフォトウォークするエージェントである．
以下の条件に従って，フォトウォークを行いなさい．
- 10〜30枚程度の画像を撮影すること．
- 徒歩30分程度の距離を歩くこと．
- 出発地点と到着地点が同一であること．
- 撮影する場所が地図の道路上であること．
```

### 3.4 結果と考察

今回は，10 人が 5 セッションずつのフォトウォークを行うことを想定し，プログラムを実行した．データをマップ上に一部の Session をプロットしたものを図 \ref{fig:ecb964141469e90836abb9c580070426} に示す．

![図1: Gemini 3 Flash Preview で生成したデータ（抜粋）](https://i.gyazo.com/ecb964141469e90836abb9c580070426.jpg)

生成された移動経路は指定されたエリア内に概ね分布しており，道路網に沿った移動軌跡が形成されている．厳密には道路中心線からわずかに逸脱する箇所や，エリア境界付近での揺らぎも見られるものの，フォトウォークの概略経路としては十分な地理的整合性が保たれているといえる．また，各セッションの軌跡において出発地点と到着地点が近接しており，フォトウォーク特有の「散策して戻ってくる」という周回性が再現されている．

さらに，同一エリア内であっても，セッションごとに異なる経路や撮影地点が生成されており，データに一定の多様性が見られる．これは，LLM が「フォトウォークするエージェント」としての役割を解釈し，単調な最短経路移動ではなく，撮影行為を伴う探索的な行動を模倣できたことを示唆している．

## 4. まとめ

本研究では，Gemini API の構造化出力を利用し，実在する地理空間において，フォトウォークの特性を模倣した位置情報付き撮影ログ生成手法を提案した．セッション単位の並列処理と詳細なプロンプト制約により，大規模かつ整合性の高いデータ生成が可能となった．

今後の課題として，生成したデータセットを用いた，フォトスポットと撮影者の同時クラスタリングの実装と評価，および実データとの比較による，生成データの有用性の検証が挙げられる．さらに，根本ら \cite{nemoto2023} による，観光スポットと訪問者の同時クラスタリングと個人的穴場の抽出を，フォトウォークに応用することを目指す．

## 参考文献

```bibtex
@article{nemoto2023,
  title={モバイル位置情報データに基づく観光スポットと訪問者の同時クラスタリングと個人的穴場の抽出},
  author={根本 侑弥 and 羽佐田 紘之 and 伊藤 真利子 and 長橋 陽介 and 岩瀬 義和 and 本間 裕大},
  journal={都市計画論文集},
  volume={58},
  number={3},
  pages={1156-1163},
  year={2023},
  doi={10.11361/journalcpij.58.1156}
}

@inproceedings{wang2024,
  title={Large language models as urban residents: An llm agent framework for personal mobility generation},
  author={Wang, Jiawei and Jiang, Renhe and Yang, Chuang and Wu, Zengqing and Shibasaki, Ryosuke and Koshizuka, Noboru and Xiao, Chuan},
  booktitle={Proceedings of the 38th International Conference on Neural Information Processing Systems},
  volume={37},
  pages={124547--124574},
  year={2024}
}

@article{li2024,
  title={Large Language Model-Driven Structured Output: A Comprehensive Benchmark and Spatial Data Generation Framework},
  author={Li, Diya and Zhao, Yue and Wang, Zhifang and Jung, Calvin and Zhang, Zhe},
  journal={ISPRS International Journal of Geo-Information},
  volume={13},
  number={11},
  pages={405},
  year={2024},
  publisher={MDPI}
}
```
